### React 18

#### UI 트리
- `React`는 `JSX`로 부터 `UI트리`를 만듬
- `React DOM`은 브라우저 `DOM`요소를 해당 `UI` 트리와 일치하도록 업데이트한다.
- `React`는 상태 조각을 컴포넌트가 `UI`트리 내의 어떤 위치에 있는지에 따라 컴포넌트를 연결한다
- `React`가 컴포넌트를 제거할 때 상태를 파괴함.
- `React`는 동일한 컴포넌트가 `UI` 트리에서 동일한 위치에 렌더링 되는 한 상태를 유지함.
- `React`에서 `JSX` 마크업이 아니라 `UI`트리 내의 위치가 중요함.
- 재렌더링 사이에서 아태를 보존하려면 트리의 구조가 한 렌더링에서 다른 렌더링으로 **일지** 해야 함.
- 구조가 다르면 `React`는 컴포넌트를 트리에서 제거할 떄 상태를 파괴한다.

#### 동일한 위치 상태 리셋
- 서로 다른 위치에 컴포넌트 렌더링하기.
  1. 상태는 `DOM`에서 제거되는 경우마다 파괴됨
  2. 독립적인 컴포넌트가 몇 개만 잇는 경우 편리함
- 키를 사용하여 상태 리셋
  1. 키를 명시하면 `React`가 순서 대신 키 자체를 위치의 일부로 사용하도록 지시함
  2. `JSX`에서 동일한 위치에 렌더링 되지만 `React`는 두 개의 다른 컴포넌트로 인식하여 상태를 공유하지 않음.

- 컴포넌트 정의를 중첩하면 안됨 -> 실수로 상태가 리셋될 경우가 발생한다.


### React 19

#### 상태 로직 리듀스 추출
- 이벤트 핸들러에 걸쳐 상태 업데이트가 분산되는 컴포넌트는 복잡해짐 -> 컴포넌트 외부에서 모든 상태 업데이트 로직을 단일 함수로 통합하여 **리듀서** 라는 방식으로 구현가능
- 복잡한 컴포넌트들의 로직을 한 곳에 모아두기 위해, 컴포넌트 외부에 상태 로직을 담은 단일 함수 `리듀서` 생성

#### 리듀서 상태 처리

- 상태 설정에서 액션을 디스패치하는 방식으로 전환
  1. 상태 설정 로직 제거
  2. 리듀서를 사용하는 경우 상태를 설정하기 위한 이벤트 핸들러 대신 액션 디스패치 하여 지정
  3. `Dispatch`에 전달하는 객체를 `액션`이라고 함
- 리듀서 함수 작성
  1. 리듀서 함수에 함수를 작성
  2. 첫 번째 인수로 현재 상태 선언
  3. 두 번째 인수로 액션 객체 선언
  4. 리듀서에서 다음 상태 반환
- 컴포넌트에서 리듀서 사용
  1. `useReducer()`

#### 리듀서 장점
- 컴포넌트에서 잘못된 상태 업데이트로 인해 자주 버그가 발생하는 경우 사용
- 리듀서는 더 많은 코드를 작성해야하지만 디버깅 및 테스트에 도움이 됨


### React 20

#### Context를 사용하여 데이터를 깊게 전달
- 부모 컴포넌트에서 자식 컴포넌트로 정보를 전달할 때는 `props`를 사용하는데, 많은 컴포넌트가 동일한 정보를 필요로 할 때 컨텍스트를 사용하면 부모 컴포넌트가 아래 트리의 모든 컴포넌트에게 일부 정보를 제공할 수 있으며, 명시적으로 `props`를 전달하지 않아도 됨.
- `props`를 전달하지 않고도 데이터를 필요로 하는 컴포넌트로 데이터를 전송할 수 있는 방법이 `Context` 기능
- `Context`를 사용하면 부모 컴포넌트가 해당 트리 아래의 전체 트리에 데이터를 제공할 수 있음.

#### Context 단계 (useContext())
- 자식이 트리 위쪽에서 데이터를 요청할 수 있는 방법이 필요
  1. 컨텍스트 생성
  2. 데이터를 필요로 하는 컴포넌트에서 해당 컨텍스트 사용
  3. 데이터를 지정하는 컴포넌트에서 해당 컨텍스트를 제공함.
- `Context`를 사용하면 컴포넌트를 추변에 맞게 조정하여 렌더링되는 위치에 따라 다르게 표시할 수 있음.

#### Context
- 컨텍스트 전달
```
1. export const MyContext = createContext(defaultValue) 생성
2. useContext(MyContext) Hook을 사용하여 자식 컴포넌트에서 읽음
3. 자식을 <MyContext.Provider value=[...]>로 감싸서 상위에 제공
```

### React 21

#### 리듀서 & 컨텍스트
- 리듀서는 컴포넌트의 상테 업데이트 로직 관리
- 컨텍스트는 정보를 다른 컴포넌트로 깊게 전달하게 해준다.

#### 하위 컴포넌트 상태와 디스패치 함수
- 두 개의 컨텍스트를 생성
- 리듀서를 사용하는 컴포넌트에서 두 켄텍스트 제공
- 필요한 컴포넌트에서 컨텍스트 사용